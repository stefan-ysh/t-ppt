import{d as C,z as s,r as m,L as T,K as _,aC as P,f as S,o as h,j as $}from"../modules/vue-D2ZY8cbv.js";import{a as g,ai as B}from"../index-B1CRNN48.js";import{u as M}from"./context-NXbt81i2.js";const x=["poster","controls"],N=C({__name:"SlidevVideo",props:{autoplay:{type:[Boolean,String]},autoreset:{},poster:{},printPoster:{},timestamp:{},printTimestamp:{},controls:{type:Boolean}},setup(d){const e=d,r=s(()=>e.printPoster??e.poster),l=s(()=>e.printTimestamp??e.timestamp??0),{$slidev:v,$renderContext:f,$route:i}=M(),{isPrintMode:y}=g(),n=s(()=>y.value||!["slide","presenter"].includes(f.value)),o=m(),u=m(!1);T(()=>{if(n.value)return;const a=+(e.timestamp??0);o.value.currentTime=a;const t=s(()=>!!i&&i.no===v?.nav.currentSlideNo),p=s(()=>!!o.value&&(B.get(o.value)?.isShown?.value??!0)),c=P(t,p);_(c,()=>{c.value?(e.autoplay===!0||e.autoplay==="once"&&!u.value)&&o.value.play():(o.value.pause(),(e.autoreset==="click"||e.autoreset==="slide"&&!t.value)&&(o.value.currentTime=a))},{immediate:!0})});function k(a){const t=a.target;n.value&&(!r.value||e.printTimestamp)&&(t.currentTime=l.value==="last"?t.duration:+l.value)}return(a,t)=>(h(),S("video",{ref_key:"video",ref:o,poster:n.value?r.value:e.poster,controls:!n.value&&e.controls,onPlay:t[0]||(t[0]=p=>u.value=!0),onLoadedmetadata:k},[$(a.$slots,"default")],40,x))}});export{N as _};
